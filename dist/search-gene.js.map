{"version":3,"file":"search-gene.js","sources":["../../../../../../../Users/marco.chan/Workspace/PMDB/riken-precision_medicine_stanza/stanzas/search-gene/App.svelte","../../../../../../../Users/marco.chan/Workspace/PMDB/riken-precision_medicine_stanza/stanzas/search-gene/index.js"],"sourcesContent":["<script>\n  import Fa from \"svelte-fa\";\n  import {\n    faCircleChevronRight,\n    faTriangleExclamation,\n  } from \"@fortawesome/free-solid-svg-icons\";\n  import drugIcon from \"@/assets/drug.svg\";\n  // import proteinIcon from \"@/assets/protein.svg\";\n  export let assembly, term;\n  let promise = search(term);\n\n  async function search(geneName) {\n    const response = await fetch(\n      `https://precisionmd-db.med.kyoto-u.ac.jp/api/genes/search?assembly=${assembly}&genename=${geneName}&limit=300`\n    );\n    const json = await response.json();\n    if (response.ok) {\n      return json;\n    } else {\n      throw new Error(json);\n    }\n  }\n</script>\n\n<div class=\"search-gene\">\n  <table class=\"table\">\n    <thead>\n      <tr>\n        <th class=\"th-gene\">Name</th>\n        <th class=\"th-gene\">UniProt acc</th>\n        <th class=\"th-calc\">Calculated</th>\n      </tr>\n    </thead>\n    <tbody>\n      {#await promise}\n        <tr><td colspan=\"3\">Loading...</td></tr>\n      {:then dataset}\n        {#each dataset.data as { genename, uniprot_acc, calculation_type }}\n          <tr>\n            <td\n              ><a\n                class=\"link-gene\"\n                href={`${window.location.origin}/dev/genes/details?assembly=${assembly}&genename=${genename}&uniprot_acc=${uniprot_acc}`}\n                >{genename}<Fa\n                  icon={faCircleChevronRight}\n                  size=\"90%\"\n                  color=\"var(--gene-color)\"\n                />\n              </a></td\n            >\n            <td>{uniprot_acc}</td>\n            <td>\n              {#if calculation_type.length > 0}\n                {#each calculation_type as calc}\n                  <img class=\"icon\" src={drugIcon} alt=\"drug\" />\n                  {calc}\n                {/each}\n              {/if}\n            </td>\n          </tr>\n        {/each}\n      {:catch error}\n        <tr\n          ><td class=\"error-message\" colspan=\"3\"\n            ><Fa\n              icon={faTriangleExclamation}\n              size=\"90%\"\n              color=\"var(--warning-color)\"\n            />\n            Unable to fetch data from the server. Please refresh the page or try\n            again later.<br />\n          </td></tr\n        >\n      {/await}\n    </tbody>\n  </table>\n</div>\n","import Stanza from \"togostanza/stanza\";\nimport toCamelCase from \"../../lib/CamelCase\";\nimport App from \"./App.svelte\";\n\nexport default class SearchGene extends Stanza {\n  app = null;\n\n  async render() {\n    if (this.app) {\n      this.root.querySelector(\"main > .search-gene\").remove();\n    }\n    this.app = new App({\n      target: this.root.querySelector(\"main\"),\n      props: {\n        assembly: toCamelCase(this.params)[\"stanzaAssembly\"],\n        term: toCamelCase(this.params)[\"stanzaTerm\"],\n        root: this.root.querySelector(\"main\"),\n      },\n    });\n  }\n}\n"],"names":[],"mappings":"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"}