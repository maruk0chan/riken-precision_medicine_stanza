{"version":3,"file":"search-variant.js","sources":["../../../../../../../Users/marco.chan/Workspace/PMDB/riken-precision_medicine_stanza/stanzas/search-variant/App.svelte","../../../../../../../Users/marco.chan/Workspace/PMDB/riken-precision_medicine_stanza/stanzas/search-variant/index.js"],"sourcesContent":["<script>\n  import Fa from \"svelte-fa\";\n  import {\n    faCircleChevronRight,\n    faTriangleExclamation,\n  } from \"@fortawesome/free-solid-svg-icons\";\n  import drugIcon from \"@/assets/drug.svg\";\n  import proteinIcon from \"@/assets/protein.svg\";\n\n  export let assembly, isPosition, term;\n  const grch = `GRCh${assembly.replace(/\\D/g, \"\")}`;\n  let promise = search(term);\n\n  async function search(term) {\n    let response;\n    if (isPosition) {\n      response = await fetch(\n        `https://precisionmd-db.med.kyoto-u.ac.jp/api/positions/search?assembly=${assembly}&position=${term}`\n      );\n    } else {\n      response = await fetch(\n        `https://precisionmd-db.med.kyoto-u.ac.jp/api/variants/search?assembly=${assembly}&variant=${term}`\n      );\n    }\n    const json = await response.json();\n    if (response.ok) {\n      return json;\n    } else {\n      throw new Error(json);\n    }\n  }\n</script>\n\n<div class=\"search-variant\">\n  <table class=\"table\">\n    <thead>\n      <tr>\n        <th class=\"th-variant\">Name</th>\n        <th class=\"th-disease\">MGeND Significance</th>\n        <th class=\"th-disease\">ClinVar Significance</th>\n        <th class=\"th-calc\">Calculated</th>\n      </tr>\n    </thead>\n    <tbody>\n      {#await promise}\n        <tr><td colspan=\"10\">Loading...</td></tr>\n      {:then dataset}\n        {#each dataset.data as { chr, variant, MGeND_ClinicalSignificance, ClinVar_ClinicalSignificance, calculation_type, end, start, alt, ref, genename, Compound_ID, PDB_ID }}\n          <tr>\n            <td\n              ><a\n                class=\"link-variant\"\n                href={`${window.location.origin}/dev/variants/details?assembly=${assembly}&chr=${chr}&start=${start}&end=${end}&ref=${ref}&alt=${alt}&variant=${variant}`}\n              >\n                {`${grch}_${chr}_${start}_${end}_${ref}_${alt}_${variant}`}\n                <Fa\n                  icon={faCircleChevronRight}\n                  size=\"90%\"\n                  color=\"var(--variant-color)\"\n                />\n              </a>\n            </td>\n            <td>\n              {MGeND_ClinicalSignificance.length === 0\n                ? \"-\"\n                : MGeND_ClinicalSignificance}\n            </td>\n            <td\n              >{ClinVar_ClinicalSignificance.length === 0\n                ? \"-\"\n                : ClinVar_ClinicalSignificance}\n            </td>\n            <td class=\"td-calc\"\n              >{#if calculation_type.length > 0}\n                {#each calculation_type as calc}\n                  <a\n                    class=\"link-calc\"\n                    href={`${window.location.origin}/dev/calculation/details?assembly=${assembly}&genename=${genename}&calculation_type=${calc}&Compound_ID=${Compound_ID}&PDB_ID=${PDB_ID}&variant=${variant}`}\n                  >\n                    <img class=\"icon\" src={drugIcon} alt=\"drug\" />\n                    {calc}\n                    <Fa\n                      icon={faCircleChevronRight}\n                      size=\"90%\"\n                      color=\"var(--calc-color)\"\n                    />\n                  </a>\n                {/each}\n              {/if}\n            </td>\n          </tr>\n        {/each}\n      {:catch error}\n        <tr\n          ><td class=\"error-message\" colspan=\"10\"\n            ><Fa\n              icon={faTriangleExclamation}\n              size=\"90%\"\n              color=\"var(--warning-color)\"\n            />\n            Unable to fetch data from the server. Please refresh the page or try\n            again later.<br />\n          </td></tr\n        >\n      {/await}\n    </tbody>\n  </table>\n</div>\n","import Stanza from \"togostanza/stanza\";\nimport toCamelCase from \"../../lib/CamelCase\";\nimport App from \"./App.svelte\";\n\nexport default class SearchVariant extends Stanza {\n  app = null;\n\n  async render() {\n    if (this.app) {\n      this.root.querySelector(\"main > .search-variant\").remove();\n    }\n    this.app = new App({\n      target: this.root.querySelector(\"main\"),\n      props: {\n        assembly: toCamelCase(this.params)[\"stanzaAssembly\"],\n        isPosition: toCamelCase(this.params)[\"stanzaIsPosition\"],\n        term: toCamelCase(this.params)[\"stanzaTerm\"],\n        root: this.root.querySelector(\"main\"),\n      },\n    });\n  }\n}\n"],"names":[],"mappings":"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"}