{"version":3,"file":"search-disease.js","sources":["../../../../../../../Users/marco.chan/Workspace/PMDB/riken-precision_medicine_stanza/stanzas/search-disease/App.svelte","../../../../../../../Users/marco.chan/Workspace/PMDB/riken-precision_medicine_stanza/stanzas/search-disease/index.js"],"sourcesContent":["<script>\n  import Fa from \"svelte-fa\";\n  import {\n    faCircleChevronRight,\n    faTriangleExclamation,\n  } from \"@fortawesome/free-solid-svg-icons\";\n  import drugIcon from \"@/assets/drug.svg\";\n  import proteinIcon from \"@/assets/protein.svg\";\n  export let assembly, term;\n  let promise = search(term);\n\n  async function search(disease) {\n    const response = await fetch(\n      `https://precisionmd-db.med.kyoto-u.ac.jp/api/positions/search?assembly=${assembly}&disease=${disease}`\n    );\n    const json = await response.json();\n    if (response.ok) {\n      return json;\n    } else {\n      throw new Error(json);\n    }\n  }\n</script>\n\n<div class=\"search-disease\">\n  <table class=\"table\">\n    <thead>\n      <tr>\n        <th class=\"th-disease\">Name (MGeND)</th>\n        <th class=\"th-disease\">Name (ClinVar)</th>\n        <th class=\"th-gene\">Gene</th>\n        <th class=\"th-gene\">UniProt acc</th>\n        <th class=\"th-variant\">Variant</th>\n        <th class=\"th-disease\">MGeND Significance</th>\n        <th class=\"th-disease\">ClinVar Significance</th>\n        <th class=\"th-calc\">Calculated</th>\n      </tr>\n    </thead>\n    <tbody>\n      {#await promise}\n        <tr><td colspan=\"10\">Loading...</td></tr>\n      {:then dataset}\n        {#each dataset.data as { MGeND_DiseaseName, ClinVar_DiseaseName, genename, uniprot_acc, variant, MGeND_ClinicalSignificance, ClinVar_ClinicalSignificance, calculation_type, assembly, chr, alt, ref, start, end, Compound_ID, PDB_ID }}\n          <tr>\n            <td class=\"td-disease\">{@html MGeND_DiseaseName.join(\"<br>\")}</td>\n            <td class=\"td-disease\">{@html ClinVar_DiseaseName.join(\"<br>\")}</td>\n            <td\n              ><a\n                class=\"link-gene\"\n                href={`${window.location.origin}/dev/genes/details?uniprot_acc=${uniprot_acc}&assembly=${assembly}&genename=${genename}`}\n                >{genename}<Fa\n                  icon={faCircleChevronRight}\n                  size=\"90%\"\n                  color=\"var(--gene-color)\"\n                />\n              </a></td\n            >\n            <td> {uniprot_acc}</td>\n            <td\n              ><a\n                class=\"link-variant\"\n                href={`${\n                  window.location.origin\n                }/dev/variants/details?assembly=${assembly}&chr=${\n                  chr ? chr : \"chr2\"\n                }&start=${start}&end=${end}&alt=${alt}&ref=${ref}&variant=${variant}`}\n                >{variant}<Fa\n                  icon={faCircleChevronRight}\n                  size=\"90%\"\n                  color=\"var(--variant-color)\"\n                />\n              </a></td\n            >\n            <td>\n              {MGeND_ClinicalSignificance.length === 0\n                ? \"-\"\n                : MGeND_ClinicalSignificance}</td\n            >\n            <td\n              >{ClinVar_ClinicalSignificance.length === 0\n                ? \"-\"\n                : ClinVar_ClinicalSignificance}</td\n            >\n            <td class=\"td-calc\"\n              >{#if calculation_type.length > 0}\n                {#each calculation_type as calc}\n                  <a\n                    class=\"link-calc\"\n                    href={`${window.location.origin}/dev/calculation/details?assembly=${assembly}&genename=${genename}&calculation_type=${calc}&Compound_ID=${Compound_ID}&PDB_ID=${PDB_ID}&variant=${variant}`}\n                  >\n                    <img class=\"icon\" src={drugIcon} alt=\"drug\" />\n                    {calc}\n                    <Fa\n                      icon={faCircleChevronRight}\n                      size=\"90%\"\n                      color=\"var(--calc-color)\"\n                    />\n                  </a>\n                {/each}\n              {/if}\n            </td>\n          </tr>\n        {/each}\n      {:catch error}\n        <tr\n          ><td class=\"error-message\" colspan=\"10\"\n            ><Fa\n              icon={faTriangleExclamation}\n              size=\"90%\"\n              color=\"var(--warning-color)\"\n            />\n            Unable to fetch data from the server. Please refresh the page or try\n            again later.<br />\n          </td></tr\n        >\n      {/await}\n    </tbody>\n  </table>\n</div>\n","import Stanza from \"togostanza/stanza\";\nimport toCamelCase from \"../../lib/CamelCase\";\nimport App from \"./App.svelte\";\n\nexport default class SearchDisease extends Stanza {\n  app = null;\n\n  async render() {\n    if (this.app) {\n      this.root.querySelector(\"main > .search-disease\").remove();\n    }\n    this.app = new App({\n      target: this.root.querySelector(\"main\"),\n      props: {\n        assembly: toCamelCase(this.params)[\"stanzaAssembly\"],\n        term: toCamelCase(this.params)[\"stanzaTerm\"],\n        root: this.root.querySelector(\"main\"),\n      },\n    });\n  }\n}\n"],"names":[],"mappings":"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"}